<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Kölle kreuzt clever</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #fff9c4, #ffe0f0, #e0f7fa, #e6f4ea, #ffffff);
      background-size: 400% 400%;
      animation: gradientFlow 15s ease infinite;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    @keyframes gradientFlow {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }

    .container {
      max-width: 800px;
      margin-top: 3rem;
      padding: 2rem;
      background-color: rgba(255, 255, 255, 0.85);
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    h1 {
      color: #c62828;
      text-align: center;
      font-size: 2.5rem;
      margin-bottom: 1rem;
      font-weight: 700;
      text-shadow: 1px 1px 3px #aaa;
    }

    .question-counter {
      font-weight: bold;
      color: #333;
      margin-bottom: 1rem;
      font-size: 1.2rem;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      user-select: none;
    }

    .nav-arrow {
      cursor: pointer;
      font-size: 1.8rem;
      color: #666;
      user-select: none;
      padding: 0 0.5rem;
      border-radius: 4px;
      transition: background-color 0.3s ease;
    }
    .nav-arrow:hover:not(.disabled) {
      background-color: #ddd;
    }
    .nav-arrow.disabled {
      color: #ccc;
      cursor: default;
    }

    .question p {
      font-size: 1.15rem;
      line-height: 1.5;
      margin: 1rem 0;
      font-weight: 600;
      color: #222;
      text-align: center;
      position: relative;
    }

    .btn-group {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
      justify-content: center;
      flex-wrap: wrap;
    }

    .btn-group button {
      flex: 1;
      max-width: 180px;
      padding: 0.7rem 1.2rem;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: background-color 0.3s ease;
      color: #111;
    }

    .btn-start {
      background-color: #c8a2c8; /* Pastell lila */
      color: #3c003c;
    }
    .btn-stimme-nicht-zu {
      background-color: #f8c4c4; /* Pastell rot */
      color: #660000;
    }
    .btn-stimme-zu {
      background-color: #c4f8c4; /* Pastell grün */
      color: #004400;
    }
    .btn-neutral {
      background-color: #fcf4b2; /* Pastell gelb */
      color: #665500;
    }

    .btn-group button:hover {
      filter: brightness(0.9);
    }

    .tool-hinweis {
      background-color: #fff3f3;
      border-left: 5px solid #c62828;
      padding: 1rem;
      margin-top: 2rem;
      margin-bottom: 2rem;
      font-size: 1rem;
      line-height: 1.5;
      border-radius: 6px;
    }

    .result {
      margin-top: 2rem;
      font-size: 1.1rem;
      color: #222;
    }

    .result h2 {
      color: #c62828;
      margin-bottom: 1rem;
      text-align: center;
    }

    .result ul {
      list-style-type: none;
      padding: 0;
      max-height: 400px;
      overflow-y: auto;
    }

    .result li {
      margin-bottom: 0.5rem;
      padding: 0.3rem 0.5rem;
      border-radius: 6px;
      font-weight: 600;
      color: white;
    }

    .footer-link {
      margin-top: 3rem;
      text-align: center;
      font-size: 0.95rem;
    }

    .footer-link a {
      text-decoration: none;
      color: #0077cc;
      font-weight: 600;
    }

    .footer-link a:hover {
      text-decoration: underline;
    }

    /* Herz für doppelte Gewichtung */
    .heart {
      position: absolute;
      top: 0;
      right: 0;
      font-size: 1.8rem;
      cursor: pointer;
      user-select: none;
      color: black;
      transition: color 0.3s ease;
      padding: 0 0.3rem;
      line-height: 1;
    }
    .heart.active {
      color: red;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Kölle kreuzt clever</h1>
    <div id="app"></div>
    <div id="result" class="result"></div>
    <div class="footer-link">
      <a href="index.html">← Zurück zur Startseite</a>
    </div>
  </div>

  <script>
    const questions = [
      "Köln soll mehr Clubs, Jugendzentren und Freizeitorte für junge Menschen schaffen.",
      "Bei neuen Wohnungen in Köln sollen günstige Plätze für Azubis und junge Erwachsene mitgeplant werden.",
      "An öffentlichen Plätzen und Haltestellen in Köln soll es flächendeckend kostenloses WLAN geben.",
      "Jugendliche sollen in Köln stärker an der Kommunalpolitik beteiligt werden.",
      "Köln soll mehr kostenlose Sport- und Bewegungsangebote im Freien anbieten.",
      "Köln soll mehr sichere Fahrradwege und Fahrradparkplätze bauen.",
      "Busse, Bahnen und Fahrräder sollen in der Innenstadt Vorrang vor Autos haben.",
      "Schüler:innen in Köln sollen kostenlos Bus und Bahn fahren dürfen.",
      "Nachtbusse und Verbindungen in Außenbezirke sollen verbessert werden.",
      "Einige Teile der Innenstadt sollen autofrei werden.",
      "Kreative Projekte und junge Start-ups sollen Räume und Geld zur Unterstützung bekommen.",
      "Bei neuen Gebäuden soll stärker auf bezahlbare Wohnungen geachtet werden.",
      "Kölner Schulen sollen modernisiert und besser für digitalen Unterricht ausgestattet werden.",
      "Das Schulessen soll kostenlos und möglichst in Bio-Qualität angeboten werden.",
      "Alle Schultoiletten in Köln sollen sauber, modern und regelmäßig gepflegt sein.",
      "Köln soll bis 2035 klimaneutral werden.",
      "Beim Sparen soll nicht an Umwelt- und Jugendprojekten gekürzt werden.",
      "Die Stadt soll sich stärker um saubere Straßen, Parks und öffentliche Plätze kümmern.",
      "Schulen sollen mehr gegen Rassismus, Queerfeindlichkeit und andere Diskriminierung tun.",
      "Die Stadt soll Angebote für junge Menschen zur mentalen Gesundheit ausbauen.",
      "Geflüchtete sollen in Köln mehr Angebote zur Teilhabe und Unterstützung bekommen.",
      "Die Stadtverwaltung soll digitaler und einfacher für junge Menschen werden.",
      "Köln soll enger mit seinen europäischen Partnerstädten zusammenarbeiten."
    ];

    const partyColors = {
      "SPD": "#E3000F", "CDU": "#000000", "Bündnis 90/Die Grünen": "#1AA037", "FDP": "#FFCC00",
      "AfD": "#009EE0", "Die Linke": "#D0006F", "Volt": "#5D3FD3", "Freie Wähler": "#F28C00",
      "Partei des Fortschritts": "#00BFAE", "Kölner Stadt-Gesellschaft": "#808080", "Die PARTEI": "#A40000",
      "Gut & Klimafreunde": "#7ED957", "Bündnis Deutschland": "#003366", "Marxistisch-Leninistische Partei Deutschlands": "#D10000",
      "Ödp": "#FF9900", "BSW": "#8E44AD"
    };

    const partyPositions = {
      "SPD": [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
      "CDU": [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
      "Bündnis 90/Die Grünen":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
      "FDP": [1,1,1,1,1,1,-1,-1,1,-1,1,1,1,0,1,-1,0,1,0,1,1,1,1],
      "AfD": [1,0,0,1,1,1,-1,-1,1,-1,0,0,1,-1,1,-1,-1,1,1,0,-1,1,0],
      "Die Linke": [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
      "Volt": [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
      "Partei des Fortschritts":[1,1,0,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1],
      "Kölner Stadt-Gesellschaft":[1,1,1,1,1,1,-1,1,1,-1,1,1,1,1,1,0,1,1,1,1,1,1,1],
      "Die PARTEI": [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
      "Gut & Klimafreunde": [1,1,0,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1],
      "Bündnis Deutschland": [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
      "Marxistisch-Leninistische Partei Deutschlands": [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
      "Ödp": [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
      "BSW": [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    };

    // Speichere Userantworten: {value: -1, 0, 1, weight: 1 oder 2}
    const userAnswers = questions.map(() => ({ value: null, weight: 1 }));

    let currentIndex = -1;

    const app = document.getElementById("app");
    const resultDiv = document.getElementById("result");

    // Herz-Symbol SVG (Unicode ♥)
    function createHeart(isDouble) {
      const span = document.createElement("span");
      span.classList.add("heart");
      span.textContent = "♥";
      if (isDouble) {
        span.classList.add("active");
      }
      return span;
    }

    function renderStartPage() {
      app.innerHTML = `
        <div style="text-align:center; padding:2rem;">
          <p style="font-size:1.3rem; color:#555; margin-bottom:2rem;">
            Hier kannst du deine Meinung zu verschiedenen Fragen in Köln abgeben und sehen, welche Parteien dir am nächsten stehen.
          </p>
          <button class="btn-start" id="startBtn">Los geht's!</button>
        </div>
      `;

      document.getElementById("startBtn").onclick = () => {
        currentIndex = 0;
        resultDiv.innerHTML = "";
        renderQuestion();
      };
    }

    function renderQuestion() {
      const qText = questions[currentIndex];
      const currentAnswer = userAnswers[currentIndex];

      // Navigation Pfeile (disabled wenn am Anfang oder Ende)
      const leftDisabled = currentIndex === 0 ? "disabled" : "";
      const rightDisabled = currentIndex === questions.length - 1 ? "disabled" : "";

      app.innerHTML = `
        <div class="question-counter">
          <span class="nav-arrow ${leftDisabled}" id="prevBtn">&#9664;</span>
          <span>Frage ${currentIndex + 1} von ${questions.length}</span>
          <span class="nav-arrow ${rightDisabled}" id="nextBtn">&#9654;</span>
          <span class="heart-container" style="position: relative;">
            <span id="heart">${currentAnswer.weight === 2 ? '♥' : '♡'}</span>
          </span>
        </div>
        <div class="question">
          <p>${qText}</p>
          <div class="btn-group">
            <button id="btnDisagree" class="btn-stimme-nicht-zu ${currentAnswer.value === -1 ? 'active' : ''}">Stimme nicht zu</button>
            <button id="btnNeutral" class="btn-neutral ${currentAnswer.value === 0 ? 'active' : ''}">Neutral</button>
            <button id="btnAgree" class="btn-stimme-zu ${currentAnswer.value === 1 ? 'active' : ''}">Stimme zu</button>
          </div>
          <div style="text-align:center; margin-top: 0.8rem;">
            <label style="cursor:pointer;">
              <input type="checkbox" id="doubleWeight" ${currentAnswer.weight === 2 ? "checked" : ""} />
              <span style="font-weight:600; user-select:none;">Doppelte Gewichtung</span>
            </label>
          </div>
          <div style="text-align:center; margin-top:1rem;">
            <button id="showResult" style="padding: 0.7rem 1.5rem; font-weight: 600; background:#c62828; color:#fff; border:none; border-radius:6px; cursor:pointer;">
              Ergebnis anzeigen
            </button>
          </div>
        </div>
      `;

      // Farbige Buttons: aktiven Status
      const btnDisagree = document.getElementById("btnDisagree");
      const btnNeutral = document.getElementById("btnNeutral");
      const btnAgree = document.getElementById("btnAgree");
      const doubleWeightCheckbox = document.getElementById("doubleWeight");

      function updateAnswer(value) {
        userAnswers[currentIndex].value = value;
        renderQuestion();
      }

      btnDisagree.onclick = () => {
        userAnswers[currentIndex].value = -1;
        renderQuestion();
      };
      btnNeutral.onclick = () => {
        userAnswers[currentIndex].value = 0;
        renderQuestion();
      };
      btnAgree.onclick = () => {
        userAnswers[currentIndex].value = 1;
        renderQuestion();
      };

      doubleWeightCheckbox.onchange = () => {
        userAnswers[currentIndex].weight = doubleWeightCheckbox.checked ? 2 : 1;
        renderQuestion();
      };

      document.getElementById("prevBtn").onclick = () => {
        if (currentIndex > 0) {
          currentIndex--;
          renderQuestion();
        }
      };
      document.getElementById("nextBtn").onclick = () => {
        if (currentIndex < questions.length - 1) {
          currentIndex++;
          renderQuestion();
        }
      };

      document.getElementById("showResult").onclick = calculateResult;
    }

    function calculateResult() {
      // Ergebnisse sammeln
      const results = [];

      // Wie viele Fragen mit nicht-neutralen Antworten
      const totalNonNeutralAnswers = userAnswers.filter(a => a.value !== null && a.value !== 0).length;

      for (const party in partyPositions) {
        let score = 0;
        let totalWeight = 0;

        for (let i = 0; i < questions.length; i++) {
          const userAnswer = userAnswers[i].value;
          const userWeight = userAnswers[i].weight;
          const partyPos = partyPositions[party][i];

          if (userAnswer === null) continue;

          totalWeight += userWeight;

          if (userAnswer === 0) {
            // neutral: zählt nicht zur Übereinstimmung
            continue;
          }

          if (userAnswer === partyPos) {
            score += userWeight;
          }
        }

        results.push({ party, score });
      }

      // Sonderfall: Wenn alle Antworten neutral oder keine beantwortet, alle Parteien 100%
      if (totalNonNeutralAnswers === 0) {
        results.forEach(r => r.percent = 100);
      } else {
        const maxScore = Math.max(...results.map(r => r.score));
        const divisor = maxScore === 0 ? 1 : maxScore;
        results.forEach(r => {
          r.percent = (r.score / divisor) * 100;
        });
      }

      // Sortiere nach Prozent absteigend
      results.sort((a,b) => b.percent - a.percent);

      // Ergebnis HTML bauen
      let html = "<h2>Dein Ergebnis:</h2><ul>";
      for (const r of results) {
        const bgColor = partyColors[r.party] || "#999";
        // Textfarbe: heller Text für dunkle Farben, sonst schwarz
        const textColor = (bgColor === "#FFCC00" || bgColor === "#F28C00" || bgColor === "#FF9900" || bgColor === "#7ED957") ? "#000" : "#fff";

        html += `<li style="background-color:${bgColor}; color:${textColor}; padding:0.5rem 1rem; border-radius:6px;">
          <strong>${r.party}</strong>: ${r.percent.toFixed(1)}%
        </li>`;
      }
      html += "</ul>" + getHinweisHTML();

      app.innerHTML = "";
      resultDiv.innerHTML = html;
    }

    function getHinweisHTML() {
      return `
        <div class="tool-hinweis">
          <p>Die Prozentangaben zeigen, wie gut deine Meinungen mit den Positionen der Parteien übereinstimmen.</p>
          <p>Du kannst deine Antworten jederzeit anpassen und neu berechnen.</p>
        </div>
      `;
    }

    // Startseite initial
    renderStartPage();

  </script>
</body>
</html>


